<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <script src="https://cdn.jsdelivr.net/npm/echarts@5.1.1/dist/echarts.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://d3js.org/d3.v6.min.js"></script>
    </head>
    <body>
        <div id="main" style="width: 1000px; height: 800px;"></div>
        <script>
            
            var chartDom = document.getElementById('main');
            var myChart = echarts.init(chartDom);
            var option;
            var syData;

            d3.csv("http://localhost:99//syWindFre.csv",function(csvdata){
                return csvdata;
                }).then(function (data) {
                    syData = data;
                    var windList = ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'], syData0=[], syData1=[], syData2=[];
                    for(var i=0; i<8; i++){
                        syData0.push(syData[0][windList[i]]);
                        syData1.push(syData[1][windList[i]]);
                        syData2.push(syData[2][windList[i]]);
                    }
                    
                    option = {
                        tooltip: {
                            trigger: 'item',
                            textStyle: {
                                fontSize: 16,
                                color: '#000',
                                fontFamily: 'Microsoft YaHei'
                            }
                        },
                        angleAxis: {
                            type: 'category',
                            data: ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'],
                            boundaryGap: false
                        },
                        radiusAxis: {
                        },
                        polar: {
                        },
                        series: [{
                            type: 'bar',
                            data: syData0,
                            coordinateSystem: 'polar',
                            name: '0-3.3m/s, 轻风',
                            stack: 'a',
                            emphasis: {
                                focus: 'series'
                            }
                        }, {
                            type: 'bar',
                            data: syData1,
                            coordinateSystem: 'polar',
                            name: '3.4-7.9m/s, 和风',
                            stack: 'a',
                            emphasis: {
                                focus: 'series'
                            }
                        }, {
                            type: 'bar',
                            data: syData2,
                            coordinateSystem: 'polar',
                            name: '8.0- m/s, 劲风及以上',
                            stack: 'a',
                            emphasis: {
                                focus: 'series'
                            }
                        }
                    ],
                        legend: {
                            show: true,
                            data: ['0-3.3m/s, 轻风', '3.4-7.9m/s, 和风', '8.0- m/s, 劲风及以上']
                        }
                    };
                    option && myChart.setOption(option);
                });
            </script>
            
    </body>
</html>